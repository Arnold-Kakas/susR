% Generated by roxygen2: do not edit by hand
% Please edit documentation in R/fetch_susr_data.R
\name{fetch_susr_data}
\alias{fetch_susr_data}
\title{Retrieve data from SUSR (Slovak Statistical Office) open data API as data frames}
\usage{
fetch_susr_data(
  params,
  geocode = FALSE,
  lang = "en",
  base_url = "https://data.statistics.sk/api/v2/dataset"
)
}
\arguments{
\item{params}{A list structured in \strong{pairs}:
\enumerate{
\item A character string with the table code (e.g. "np3106rs").
\item A list (or vector) of dimension "segments" in the order they should
appear in the URL. Each segment can be:
\itemize{
\item A character scalar (e.g. "SK021"), or
\item A character vector (e.g. \code{c("2016","2017","2018")})
which we join by commas (\code{"2016,2017,2018"}),
\item Special keywords like \code{"all"}, \code{"last5"}, \code{"LAU1"}, etc.
(passed as-is).
}
}
For multiple tables, just keep repeating those pairs in the same list.}

\item{geocode}{Binary TRUE/FALSE. If TRUE, result will contain geometry. Default is FALSE.}

\item{lang}{The language code. Defaults to \code{"en"}. Can also be \code{"sk"}.}

\item{base_url}{The base SUSR dataset endpoint. Defaults to
\code{"https://data.statistics.sk/api/v2/dataset"}.}
}
\value{
A \emph{named list of data frames}, keyed by the table codes.
}
\description{
This function constructs and calls the dataset endpoint for one or more tables,
including their dimension selections, and returns each as a data frame (tibble).
Internally, it fetches JSON-stat and parses it using the \pkg{rjstat} package.
}
\details{
The \strong{order} of dimension segments is crucial. For example, if the
official URL pattern is:
\preformatted{
  https://data.statistics.sk/api/v2/dataset/<table_code>/<param1>/<param2>/<param3>?lang=en&type=json
}
then pass \code{list("param1", "param2", "param3")} in that \emph{exact} order.

Internally, each JSON-stat response is converted to a data frame (tibble)
using \code{rjstat::fromJSONstat()}. If the JSON structure is invalid or
the API call fails, the corresponding table is stored as \code{NULL} (with a warning).
}
